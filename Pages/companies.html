<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ù„Ø§ÙØµØ§Ø­Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© - ESG Ùˆ TCFD</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* RGB versions for opacity control */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  /* Background color tokens (Light Mode) */
  --color-bg-1: rgba(59, 130, 246, 0.08); /* Light blue */
  --color-bg-2: rgba(245, 158, 11, 0.08); /* Light yellow */
  --color-bg-3: rgba(34, 197, 94, 0.08); /* Light green */
  --color-bg-4: rgba(239, 68, 68, 0.08); /* Light red */
  --color-bg-5: rgba(147, 51, 234, 0.08); /* Light purple */
  --color-bg-6: rgba(249, 115, 22, 0.08); /* Light orange */
  --color-bg-7: rgba(236, 72, 153, 0.08); /* Light pink */
  --color-bg-8: rgba(6, 182, 212, 0.08); /* Light cyan */

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  /* Common style patterns */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for opacity control */
  --color-success-rgb: 33, 128, 141;
  --color-error-rgb: 192, 21, 47;
  --color-warning-rgb: 168, 75, 47;
  --color-info-rgb: 98, 108, 113;

  /* Typography */
  --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system,
    BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo,
    Monaco, Consolas, monospace;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --letter-spacing-tight: -0.01em;

  /* Spacing */
  --space-0: 0;
  --space-1: 1px;
  --space-2: 2px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-10: 10px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04),
    0 2px 4px -1px rgba(0, 0, 0, 0.02);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04),
    0 4px 6px -2px rgba(0, 0, 0, 0.02);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 rgba(0, 0, 0, 0.03);

  /* Animation */
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

  /* Layout */
  --container-sm: 640px;
  --container-md: 768px;
  --container-lg: 1024px;
  --container-xl: 1280px;
}

/* Dark mode colors */
@media (prefers-color-scheme: dark) {
  :root {
    /* RGB versions for opacity control (Dark Mode) */
    --color-gray-400-rgb: 119, 124, 124;
    --color-teal-300-rgb: 50, 184, 198;
    --color-gray-300-rgb: 167, 169, 169;
    --color-gray-200-rgb: 245, 245, 245;

    /* Background color tokens (Dark Mode) */
    --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
    --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
    --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
    --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
    --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
    --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
    --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
    --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

    /* Semantic Color Tokens (Dark Mode) */
    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active: var(--color-teal-800);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-gray-400-rgb), 0.3);
    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);
    --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
    --color-btn-primary-text: var(--color-slate-900);
    --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
    --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
    --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(0, 0, 0, 0.15);
    --button-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

    /* Common style patterns - updated for dark mode */
    --focus-ring: 0 0 0 3px var(--color-focus-ring);
    --focus-outline: 2px solid var(--color-primary);
    --status-bg-opacity: 0.15;
    --status-border-opacity: 0.25;
    --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

    /* RGB versions for dark mode */
    --color-success-rgb: var(--color-teal-300-rgb);
    --color-error-rgb: var(--color-red-400-rgb);
    --color-warning-rgb: var(--color-orange-400-rgb);
    --color-info-rgb: var(--color-gray-300-rgb);
  }
}

/* Data attribute for manual theme switching */
[data-color-scheme="dark"] {
  /* RGB versions for opacity control (dark mode) */
  --color-gray-400-rgb: 119, 124, 124;
  --color-teal-300-rgb: 50, 184, 198;
  --color-gray-300-rgb: 167, 169, 169;
  --color-gray-200-rgb: 245, 245, 245;

  /* Colorful background palette - Dark Mode */
  --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
  --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
  --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
  --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
  --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
  --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
  --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
  --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

  /* Semantic Color Tokens (Dark Mode) */
  --color-background: var(--color-charcoal-700);
  --color-surface: var(--color-charcoal-800);
  --color-text: var(--color-gray-200);
  --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
  --color-primary: var(--color-teal-300);
  --color-primary-hover: var(--color-teal-400);
  --color-primary-active: var(--color-teal-800);
  --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
  --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
  --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
  --color-border: rgba(var(--color-gray-400-rgb), 0.3);
  --color-error: var(--color-red-400);
  --color-success: var(--color-teal-300);
  --color-warning: var(--color-orange-400);
  --color-info: var(--color-gray-300);
  --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
  --color-btn-primary-text: var(--color-slate-900);
  --color-card-border: rgba(var(--color-gray-400-rgb), 0.15);
  --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 rgba(0, 0, 0, 0.15);
  --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
  --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

  /* Common style patterns - updated for dark mode */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for dark mode */
  --color-success-rgb: var(--color-teal-300-rgb);
  --color-error-rgb: var(--color-red-400-rgb);
  --color-warning-rgb: var(--color-orange-400-rgb);
  --color-info-rgb: var(--color-gray-300-rgb);
}

[data-color-scheme="light"] {
  /* RGB versions for opacity control (light mode) */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);

  /* RGB versions for light mode */
  --color-success-rgb: var(--color-teal-500-rgb);
  --color-error-rgb: var(--color-red-500-rgb);
  --color-warning-rgb: var(--color-orange-500-rgb);
  --color-info-rgb: var(--color-slate-500-rgb);
}

/* Base styles */
html {
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  line-height: var(--line-height-normal);
  color: var(--color-text);
  background-color: var(--color-background);
  -webkit-font-smoothing: antialiased;
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

/* Typography */
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--color-text);
  letter-spacing: var(--letter-spacing-tight);
}

h1 {
  font-size: var(--font-size-4xl);
}
h2 {
  font-size: var(--font-size-3xl);
}
h3 {
  font-size: var(--font-size-2xl);
}
h4 {
  font-size: var(--font-size-xl);
}
h5 {
  font-size: var(--font-size-lg);
}
h6 {
  font-size: var(--font-size-md);
}

p {
  margin: 0 0 var(--space-16) 0;
}

a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color var(--duration-fast) var(--ease-standard);
}

a:hover {
  color: var(--color-primary-hover);
}

code,
pre {
  font-family: var(--font-family-mono);
  font-size: calc(var(--font-size-base) * 0.95);
  background-color: var(--color-secondary);
  border-radius: var(--radius-sm);
}

code {
  padding: var(--space-1) var(--space-4);
}

pre {
  padding: var(--space-16);
  margin: var(--space-16) 0;
  overflow: auto;
  border: 1px solid var(--color-border);
}

pre code {
  background: none;
  padding: 0;
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-8) var(--space-16);
  border-radius: var(--radius-base);
  font-size: var(--font-size-base);
  font-weight: 500;
  line-height: 1.5;
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-standard);
  border: none;
  text-decoration: none;
  position: relative;
}

.btn:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

.btn--primary {
  background: var(--color-primary);
  color: var(--color-btn-primary-text);
}

.btn--primary:hover {
  background: var(--color-primary-hover);
}

.btn--primary:active {
  background: var(--color-primary-active);
}

.btn--secondary {
  background: var(--color-secondary);
  color: var(--color-text);
}

.btn--secondary:hover {
  background: var(--color-secondary-hover);
}

.btn--secondary:active {
  background: var(--color-secondary-active);
}

.btn--outline {
  background: transparent;
  border: 1px solid var(--color-border);
  color: var(--color-text);
}

.btn--outline:hover {
  background: var(--color-secondary);
}

.btn--sm {
  padding: var(--space-4) var(--space-12);
  font-size: var(--font-size-sm);
  border-radius: var(--radius-sm);
}

.btn--lg {
  padding: var(--space-10) var(--space-20);
  font-size: var(--font-size-lg);
  border-radius: var(--radius-md);
}

.btn--full-width {
  width: 100%;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Form elements */
.form-control {
  display: block;
  width: 100%;
  padding: var(--space-8) var(--space-12);
  font-size: var(--font-size-md);
  line-height: 1.5;
  color: var(--color-text);
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  transition: border-color var(--duration-fast) var(--ease-standard),
    box-shadow var(--duration-fast) var(--ease-standard);
}

textarea.form-control {
  font-family: var(--font-family-base);
  font-size: var(--font-size-base);
}

select.form-control {
  padding: var(--space-8) var(--space-12);
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: var(--select-caret-light);
  background-repeat: no-repeat;
  background-position: right var(--space-12) center;
  background-size: 16px;
  padding-right: var(--space-32);
}

/* Add a dark mode specific caret */
@media (prefers-color-scheme: dark) {
  select.form-control {
    background-image: var(--select-caret-dark);
  }
}

/* Also handle data-color-scheme */
[data-color-scheme="dark"] select.form-control {
  background-image: var(--select-caret-dark);
}

[data-color-scheme="light"] select.form-control {
  background-image: var(--select-caret-light);
}

.form-control:focus {
  border-color: var(--color-primary);
  outline: var(--focus-outline);
}

.form-label {
  display: block;
  margin-bottom: var(--space-8);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.form-group {
  margin-bottom: var(--space-16);
}

/* Card component */
.card {
  background-color: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-card-border);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  transition: box-shadow var(--duration-normal) var(--ease-standard);
}

.card:hover {
  box-shadow: var(--shadow-md);
}

.card__body {
  padding: var(--space-16);
}

.card__header,
.card__footer {
  padding: var(--space-16);
  border-bottom: 1px solid var(--color-card-border-inner);
}

/* Status indicators - simplified with CSS variables */
.status {
  display: inline-flex;
  align-items: center;
  padding: var(--space-6) var(--space-12);
  border-radius: var(--radius-full);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.status--success {
  background-color: rgba(
    var(--color-success-rgb, 33, 128, 141),
    var(--status-bg-opacity)
  );
  color: var(--color-success);
  border: 1px solid
    rgba(var(--color-success-rgb, 33, 128, 141), var(--status-border-opacity));
}

.status--error {
  background-color: rgba(
    var(--color-error-rgb, 192, 21, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-error);
  border: 1px solid
    rgba(var(--color-error-rgb, 192, 21, 47), var(--status-border-opacity));
}

.status--warning {
  background-color: rgba(
    var(--color-warning-rgb, 168, 75, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-warning);
  border: 1px solid
    rgba(var(--color-warning-rgb, 168, 75, 47), var(--status-border-opacity));
}

.status--info {
  background-color: rgba(
    var(--color-info-rgb, 98, 108, 113),
    var(--status-bg-opacity)
  );
  color: var(--color-info);
  border: 1px solid
    rgba(var(--color-info-rgb, 98, 108, 113), var(--status-border-opacity));
}

/* Container layout */
.container {
  width: 100%;
  margin-right: auto;
  margin-left: auto;
  padding-right: var(--space-16);
  padding-left: var(--space-16);
}

@media (min-width: 640px) {
  .container {
    max-width: var(--container-sm);
  }
}
@media (min-width: 768px) {
  .container {
    max-width: var(--container-md);
  }
}
@media (min-width: 1024px) {
  .container {
    max-width: var(--container-lg);
  }
}
@media (min-width: 1280px) {
  .container {
    max-width: var(--container-xl);
  }
}

/* Utility classes */
.flex {
  display: flex;
}
.flex-col {
  flex-direction: column;
}
.items-center {
  align-items: center;
}
.justify-center {
  justify-content: center;
}
.justify-between {
  justify-content: space-between;
}
.gap-4 {
  gap: var(--space-4);
}
.gap-8 {
  gap: var(--space-8);
}
.gap-16 {
  gap: var(--space-16);
}

.m-0 {
  margin: 0;
}
.mt-8 {
  margin-top: var(--space-8);
}
.mb-8 {
  margin-bottom: var(--space-8);
}
.mx-8 {
  margin-left: var(--space-8);
  margin-right: var(--space-8);
}
.my-8 {
  margin-top: var(--space-8);
  margin-bottom: var(--space-8);
}

.p-0 {
  padding: 0;
}
.py-8 {
  padding-top: var(--space-8);
  padding-bottom: var(--space-8);
}
.px-8 {
  padding-left: var(--space-8);
  padding-right: var(--space-8);
}
.py-16 {
  padding-top: var(--space-16);
  padding-bottom: var(--space-16);
}
.px-16 {
  padding-left: var(--space-16);
  padding-right: var(--space-16);
}

.block {
  display: block;
}
.hidden {
  display: none;
}

/* Accessibility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

:focus-visible {
  outline: var(--focus-outline);
  outline-offset: 2px;
}

/* Dark mode specifics */
[data-color-scheme="dark"] .btn--outline {
  border: 1px solid var(--color-border-secondary);
}

@font-face {
  font-family: 'FKGroteskNeue';
  src: url('https://r2cdn.perplexity.ai/fonts/FKGroteskNeue.woff2')
    format('woff2');
}

/* Custom Dashboard Styles */
.dashboard {
    max-width: 1400px;
    margin: 0 auto;
    padding: var(--space-24);
    direction: rtl;
}

.dashboard__header {
    text-align: center;
    margin-bottom: var(--space-32);
}

.dashboard__title {
    font-size: var(--font-size-4xl);
    color: var(--color-text);
    margin-bottom: var(--space-16);
}

.dashboard__subtitle {
    color: var(--color-text-secondary);
    font-size: var(--font-size-lg);
}

.dashboard__controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-24);
    gap: var(--space-16);
    flex-wrap: wrap;
}

.tab-group {
    display: flex;
    background: var(--color-surface);
    border-radius: var(--radius-base);
    border: 1px solid var(--color-border);
    overflow: hidden;
}

.tab-btn {
    padding: var(--space-12) var(--space-20);
    background: transparent;
    border: none;
    cursor: pointer;
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-secondary);
    transition: all var(--duration-normal) var(--ease-standard);
}

.tab-btn.active {
    background: var(--color-primary);
    color: var(--color-btn-primary-text);
}

.tab-btn:hover:not(.active) {
    background: var(--color-secondary);
    color: var(--color-text);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-16);
    margin-bottom: var(--space-32);
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
}

@media (max-width: 768px) {
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 480px) {
    .stats-grid {
        grid-template-columns: 1fr;
    }
}

.stat-card {
    background: var(--color-surface);
    border: 1px solid var(--color-card-border);
    border-radius: var(--radius-lg);
    padding: var(--space-20);
    text-align: center;
    transition: all var(--duration-normal) var(--ease-standard);
    position: relative;
    overflow: hidden;
    cursor: pointer;
}

.stat-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
}

.stat-card__icon {
    font-size: var(--font-size-4xl);
    margin-bottom: var(--space-12);
    display: block;
}

.stat-card__label {
    color: var(--color-text-secondary);
    font-size: var(--font-size-sm);
    margin-bottom: var(--space-8);
    font-weight: var(--font-weight-medium);
    line-height: 1.3;
}

.stat-card__value {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
    margin-bottom: var(--space-8);
}

.stat-card__subtitle {
    font-size: var(--font-size-xs);
    color: var(--color-text-secondary);
    margin-bottom: var(--space-8);
}

.stat-card__progress {
    background: var(--color-bg-2);
    border-radius: var(--radius-full);
    height: 6px;
    margin-bottom: var(--space-8);
    overflow: hidden;
}

.stat-card__progress-bar {
    height: 100%;
    border-radius: var(--radius-full);
    transition: width var(--duration-normal) var(--ease-standard);
}

.stat-card__badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-4) var(--space-8);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    color: var(--color-white);
}

.stat-card--general {
    background: linear-gradient(135deg, var(--color-bg-1), var(--color-bg-3));
    border: 2px solid var(--color-primary);
}

.stat-card--sector {
    position: relative;
}

.stat-card--sector::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 4px;
    height: 100%;
    background: var(--card-color, var(--color-primary));
}

.charts-section {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-24);
    margin-bottom: var(--space-32);
}

.chart-container {
    background: var(--color-surface);
    border: 1px solid var(--color-card-border);
    border-radius: var(--radius-lg);
    padding: var(--space-20);
    height: 400px;
}

.chart-title {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--space-16);
    text-align: center;
    color: var(--color-text);
}

.sectors-table {
    background: var(--color-surface);
    border: 1px solid var(--color-card-border);
    border-radius: var(--radius-lg);
    overflow: hidden;
}

.sectors-table__header {
    background: var(--color-bg-1);
    padding: var(--space-16);
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text);
    border-bottom: 1px solid var(--color-card-border);
}

.sectors-table__content {
    max-height: 500px;
    overflow-y: auto;
}

.sector-row {
    display: grid;
    grid-template-columns: 2fr repeat(3, 1fr);
    gap: var(--space-8);
    padding: var(--space-12) var(--space-16);
    border-bottom: 1px solid var(--color-card-border-inner);
    align-items: center;
}

.sector-row:hover {
    background: var(--color-bg-2);
}

.sector-name {
    font-weight: var(--font-weight-medium);
    color: var(--color-text);
}

.sector-value {
    text-align: center;
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
}

.sector-total {
    font-weight: var(--font-weight-semibold);
    color: var(--color-text);
}

/* Modal Styles */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: all var(--duration-normal) var(--ease-standard);
}

.modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.modal {
    background: var(--color-surface);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    max-width: 90vw;
    max-height: 90vh;
    width: 1000px;
    overflow: hidden;
    transform: scale(0.95);
    transition: transform var(--duration-normal) var(--ease-standard);
}

.modal-overlay.active .modal {
    transform: scale(1);
}

.modal__header {
    background: var(--color-bg-1);
    padding: var(--space-20);
    border-bottom: 1px solid var(--color-card-border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal__title {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text);
}

.modal__close {
    background: none;
    border: none;
    font-size: var(--font-size-xl);
    cursor: pointer;
    color: var(--color-text-secondary);
    padding: var(--space-4);
    line-height: 1;
}

.modal__close:hover {
    color: var(--color-text);
}

.modal__content {
    padding: var(--space-20);
    max-height: calc(90vh - 200px);
    overflow-y: auto;
}

.modal__footer {
    background: var(--color-bg-2);
    padding: var(--space-16) var(--space-20);
    border-top: 1px solid var(--color-card-border);
    display: flex;
    justify-content: flex-end;
    gap: var(--space-12);
}

.editor-tabs {
    display: flex;
    border-bottom: 1px solid var(--color-border);
    margin-bottom: var(--space-20);
}

.editor-tab {
    padding: var(--space-12) var(--space-16);
    background: none;
    border: none;
    cursor: pointer;
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
    border-bottom: 2px solid transparent;
    transition: all var(--duration-normal) var(--ease-standard);
}

.editor-tab.active {
    color: var(--color-primary);
    border-bottom-color: var(--color-primary);
}

.editor-tab:hover:not(.active) {
    color: var(--color-text);
}

.editor-section {
    display: none;
}

.editor-section.active {
    display: block;
}

.editor-group {
    margin-bottom: var(--space-24);
}

.editor-group__title {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text);
    margin-bottom: var(--space-12);
    padding-bottom: var(--space-8);
    border-bottom: 1px solid var(--color-border);
}

.editor-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space-16);
}

.toast {
    position: fixed;
    top: var(--space-20);
    right: var(--space-20);
    background: var(--color-success);
    color: var(--color-white);
    padding: var(--space-12) var(--space-20);
    border-radius: var(--radius-base);
    box-shadow: var(--shadow-lg);
    z-index: 1100;
    transform: translateX(100%);
    transition: transform var(--duration-normal) var(--ease-standard);
}

.toast.show {
    transform: translateX(0);
}

@media (max-width: 768px) {
    .dashboard {
        padding: var(--space-16);
    }
    
    .charts-section {
        grid-template-columns: 1fr;
    }
    
    .sector-row {
        grid-template-columns: 1fr;
        gap: var(--space-4);
    }
    
    .dashboard__controls {
        flex-direction: column;
        align-items: stretch;
    }
    
    .stats-grid {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    }
}
    </style>
</head>
<body>
    <div class="dashboard">
        <header class="dashboard__header">
            <h1 class="dashboard__title">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ù„Ø§ÙØµØ§Ø­Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©</h1>
            <p class="dashboard__subtitle">ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª Ø§Ù„Ø¨ÙŠØ¦ÙŠØ© ÙˆØ§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© ÙˆØ§Ù„Ø­ÙˆÙƒÙ…Ø© &amp; Ø§Ù„ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø®ÙŠØ©</p>
        </header>

        <div class="dashboard__controls">
            <div class="tab-group">
                <button class="tab-btn active" id="esg-tab" onclick="switchTab('esg')">
                    ØªÙ‚ÙŠÙŠÙ… ESG
                </button>
                <button class="tab-btn" id="tcfd-tab" onclick="switchTab('tcfd')">
                    ØªÙ‚ÙŠÙŠÙ… TCFD
                </button>
            </div>

            <div style="display: flex; gap: var(--space-12); flex-wrap: wrap;">
                <button class="btn btn--primary" onclick="openEditor()">
                    âš™ï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                </button>
                <button class="btn btn--secondary" onclick="exportData()">
                    ğŸ“¥ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                </button>
                <button class="btn btn--outline" onclick="resetData()">
                    ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
                </button>
            </div>
        </div>

        <!-- Statistics Cards -->
        <div class="stats-grid" id="stats-container">
            <!-- Will be populated by JavaScript -->
        </div>

        <!-- Charts Section -->
        <div class="charts-section">
            <div class="chart-container">
                <h3 class="chart-title" id="pie-chart-title">ØªÙˆØ²ÙŠØ¹ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª</h3>
                <canvas id="pieChart"></canvas>
            </div>
            <div class="chart-container">
                <h3 class="chart-title" id="bar-chart-title">ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª</h3>
                <canvas id="barChart"></canvas>
            </div>
        </div>

        <!-- Sectors Table -->
        <div class="sectors-table">
            <div class="sectors-table__header" id="table-title">
                ØªØ­Ù„ÙŠÙ„ ØªÙØµÙŠÙ„ÙŠ Ù„Ù„Ù‚Ø·Ø§Ø¹Ø§Øª
            </div>
            <div class="sectors-table__content" id="sectors-content">
                <!-- Will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div class="modal-overlay" id="editModal">
        <div class="modal">
            <div class="modal__header">
                <h2 class="modal__title">ØªØ­Ø±ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
                <button class="modal__close" onclick="closeEditor()">&times;</button>
            </div>
            <div class="modal__content">
                <div class="editor-tabs">
                    <button class="editor-tab active" onclick="switchEditorTab('titles')">
                        Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†
                    </button>
                    <button class="editor-tab" onclick="switchEditorTab('totals')">
                        Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©
                    </button>
                    <button class="editor-tab" onclick="switchEditorTab('sectors')">
                        Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª
                    </button>
                    <button class="editor-tab" onclick="switchEditorTab('labels')">
                        Ø§Ù„ØªØ³Ù…ÙŠØ§Øª
                    </button>
                </div>

                <div class="editor-section active" id="editor-titles">
                    <div class="editor-group">
                        <h3 class="editor-group__title">Ø¹Ù†Ø§ÙˆÙŠÙ† ESG</h3>
                        <div class="form-group">
                            <label class="form-label">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</label>
                            <input type="text" class="form-control" id="esg-title" />
                        </div>
                    </div>
                    <div class="editor-group">
                        <h3 class="editor-group__title">Ø¹Ù†Ø§ÙˆÙŠÙ† TCFD</h3>
                        <div class="form-group">
                            <label class="form-label">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</label>
                            <input type="text" class="form-control" id="tcfd-title" />
                        </div>
                    </div>
                </div>

                <div class="editor-section" id="editor-totals">
                    <div class="editor-group">
                        <h3 class="editor-group__title">Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© - ESG</h3>
                        <div class="editor-grid">
                            <div class="form-group">
                                <label class="form-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø´Ø±ÙƒØ§Øª</label>
                                <input type="number" class="form-control" id="esg-total-companies" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">ØªÙ‚ÙŠÙŠÙ… A+</label>
                                <input type="number" class="form-control" id="esg-A_plus" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">ØªÙ‚ÙŠÙŠÙ… A</label>
                                <input type="number" class="form-control" id="esg-A" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">ØªÙ‚ÙŠÙŠÙ… B</label>
                                <input type="number" class="form-control" id="esg-B" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">ØªÙ‚ÙŠÙŠÙ… C</label>
                                <input type="number" class="form-control" id="esg-C" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">ØªÙ‚ÙŠÙŠÙ… D</label>
                                <input type="number" class="form-control" id="esg-D" />
                            </div>
                        </div>
                    </div>
                    <div class="editor-group">
                        <h3 class="editor-group__title">Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© - TCFD</h3>
                        <div class="editor-grid">
                            <div class="form-group">
                                <label class="form-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø´Ø±ÙƒØ§Øª</label>
                                <input type="number" class="form-control" id="tcfd-total-companies" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">ØªÙ‚ÙŠÙŠÙ… A+</label>
                                <input type="number" class="form-control" id="tcfd-A_plus" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">ØªÙ‚ÙŠÙŠÙ… A</label>
                                <input type="number" class="form-control" id="tcfd-A" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">ØªÙ‚ÙŠÙŠÙ… B</label>
                                <input type="number" class="form-control" id="tcfd-B" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">ØªÙ‚ÙŠÙŠÙ… C</label>
                                <input type="number" class="form-control" id="tcfd-C" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">ØªÙ‚ÙŠÙŠÙ… D</label>
                                <input type="number" class="form-control" id="tcfd-D" />
                            </div>
                        </div>
                    </div>
                </div>

                <div class="editor-section" id="editor-sectors">
                    <div class="editor-group">
                        <h3 class="editor-group__title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª</h3>
                        <div id="sectors-editor">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="editor-section" id="editor-labels">
                    <div class="editor-group">
                        <h3 class="editor-group__title">ØªØ³Ù…ÙŠØ§Øª Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª</h3>
                        <div class="editor-grid">
                            <div class="form-group">
                                <label class="form-label">ØªØ³Ù…ÙŠØ© A+</label>
                                <input type="text" class="form-control" id="label-A_plus" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">ØªØ³Ù…ÙŠØ© A</label>
                                <input type="text" class="form-control" id="label-A" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">ØªØ³Ù…ÙŠØ© B</label>
                                <input type="text" class="form-control" id="label-B" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">ØªØ³Ù…ÙŠØ© C</label>
                                <input type="text" class="form-control" id="label-C" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">ØªØ³Ù…ÙŠØ© D</label>
                                <input type="text" class="form-control" id="label-D" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal__footer">
                <button class="btn btn--outline" onclick="closeEditor()">Ø¥Ù„ØºØ§Ø¡</button>
                <button class="btn btn--secondary" onclick="previewChanges()">Ù…Ø¹Ø§ÙŠÙ†Ø©</button>
                <button class="btn btn--primary" onclick="saveChanges()">Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        // Global variables
        let currentTab = 'esg';
        let currentEditorTab = 'titles';
        let pieChart = null;
        let barChart = null;
        
        // Default data with proper structure for 9-card layout
        let dashboardData = {
            general: {
                total_companies_both: 1000,
                esg_total: 350,
                tcfd_total: 700
            },
            sectors: [
                {
                    name: "Ø³ÙˆÙ‚ Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„",
                    name_en: "Capital Market",
                    icon: "ğŸ“ˆ",
                    color: "#1FB8CD",
                    esg: { contacted: 50 },
                    tcfd: { contacted: 100 }
                },
                {
                    name: "Ø§Ù„ØªØ£Ù…ÙŠÙ†",
                    name_en: "Insurance",
                    icon: "ğŸ›¡ï¸",
                    color: "#FFC185",
                    esg: { contacted: 50 },
                    tcfd: { contacted: 100 }
                },
                {
                    name: "Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ",
                    name_en: "Consumer Finance",
                    icon: "ğŸ›’",
                    color: "#4CAF50",
                    esg: { contacted: 50 },
                    tcfd: { contacted: 100 }
                },
                {
                    name: "Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠ",
                    name_en: "Real Estate Finance",
                    icon: "ğŸ ",
                    color: "#FF9800",
                    esg: { contacted: 50 },
                    tcfd: { contacted: 100 }
                },
                {
                    name: "Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠ",
                    name_en: "Financial Leasing",
                    icon: "ğŸ”‘",
                    color: "#9C27B0",
                    esg: { contacted: 50 },
                    tcfd: { contacted: 100 }
                },
                {
                    name: "Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ù…ØªÙ†Ø§Ù‡ÙŠ Ø§Ù„ØµØºØ±",
                    name_en: "Microfinance",
                    icon: "ğŸ’",
                    color: "#607D8B",
                    esg: { contacted: 50 },
                    tcfd: { contacted: 100 }
                },
                {
                    name: "Ø§Ù„ØªØ®ØµÙŠÙ…",
                    name_en: "Factoring",
                    icon: "ğŸ’°",
                    color: "#F44336",
                    esg: { contacted: 50 },
                    tcfd: { contacted: 100 }
                }
            ],
            colors: {
                primary: "#1FB8CD",
                secondary: "#FFC185",
                success: "#4CAF50",
                warning: "#FF9800",
                danger: "#F44336",
                info: "#2196F3"
            }
        };

        // Initialize dashboard
        function initDashboard() {
            // Load saved data if exists
            const savedData = loadData();
            if (savedData) {
                dashboardData = { ...dashboardData, ...savedData };
            }
            
            updateDashboard();
        }

        // Switch between ESG and TCFD tabs
        function switchTab(tab) {
            currentTab = tab;
            document.getElementById('esg-tab').classList.toggle('active', tab === 'esg');
            document.getElementById('tcfd-tab').classList.toggle('active', tab === 'tcfd');
            updateDashboard();
        }

        // Update dashboard content
        function updateDashboard() {
            updateStatsCards();
            updateCharts();
            updateSectorsTable();
            updateTabTitles();
        }

        // Update tab titles
        function updateTabTitles() {
            const pieTitle = document.getElementById('pie-chart-title');
            const barTitle = document.getElementById('bar-chart-title');
            const tableTitle = document.getElementById('table-title');
            
            if (currentTab === 'esg') {
                pieTitle.textContent = 'ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… ESG';
                barTitle.textContent = 'Ù…Ù‚Ø§Ø±Ù†Ø© Ù‚Ø·Ø§Ø¹Ø§Øª ESG';
                tableTitle.textContent = 'ØªØ­Ù„ÙŠÙ„ ØªÙØµÙŠÙ„ÙŠ Ù„Ù„Ù‚Ø·Ø§Ø¹Ø§Øª - ESG';
            } else {
                pieTitle.textContent = 'ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… TCFD';
                barTitle.textContent = 'Ù…Ù‚Ø§Ø±Ù†Ø© Ù‚Ø·Ø§Ø¹Ø§Øª TCFD';
                tableTitle.textContent = 'ØªØ­Ù„ÙŠÙ„ ØªÙØµÙŠÙ„ÙŠ Ù„Ù„Ù‚Ø·Ø§Ø¹Ø§Øª - TCFD';
            }
        }

        // Update statistics cards with 9-card layout
        function updateStatsCards() {
            const container = document.getElementById('stats-container');
            container.innerHTML = '';

            // Card 1: Total companies ESG & TCFD
            const totalBothCard = createGeneralCard(
                'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø®Ø§Ø·Ø¨Ø© ESG & TCFD', 
                dashboardData.general.total_companies_both, 
                'ğŸ¢', 
                '#1FB8CD'
            );
            container.appendChild(totalBothCard);

            // Card 2: Total ESG or TCFD based on current tab
            let totalTabCard;
            if (currentTab === 'esg') {
                totalTabCard = createGeneralCard(
                    'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø®Ø§Ø·Ø¨Ø© Ø¨Ù€ ESG', 
                    dashboardData.general.esg_total, 
                    'ğŸŒ±', 
                    '#4CAF50'
                );
            } else {
                totalTabCard = createGeneralCard(
                    'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø®Ø§Ø·Ø¨Ø© Ø¨Ù€ TCFD', 
                    dashboardData.general.tcfd_total, 
                    'ğŸŒ', 
                    '#2196F3'
                );
            }
            container.appendChild(totalTabCard);

            // Cards 3-9: All 7 sectors
            dashboardData.sectors.forEach((sector) => {
                const card = createSectorCard(sector, currentTab);
                container.appendChild(card);
            });
        }

        // Create general statistics card
        function createGeneralCard(label, value, icon, color) {
            const card = document.createElement('div');
            card.className = 'stat-card stat-card--general';
            card.innerHTML = `
                <span class="stat-card__icon">${icon}</span>
                <div class="stat-card__label">${label}</div>
                <div class="stat-card__value">${value.toLocaleString()}</div>
                <div class="stat-card__subtitle">Ø´Ø±ÙƒØ© Ù…Ø®Ø§Ø·Ø¨Ø©</div>
            `;
            card.style.setProperty('--card-color', color);
            return card;
        }

        // Create sector card element
        function createSectorCard(sector, type) {
            const card = document.createElement('div');
            card.className = 'stat-card stat-card--sector';
            
            const data = sector[type];
            const contacted = data.contacted;
            
            card.innerHTML = `
                <span class="stat-card__icon">${sector.icon}</span>
                <div class="stat-card__label">${sector.name}</div>
                <div class="stat-card__value">${contacted.toLocaleString()}</div>
                <div class="stat-card__subtitle">Ø´Ø±ÙƒØ© Ù…Ø®Ø§Ø·Ø¨Ø©</div>
                <div class="stat-card__progress">
                    <div class="stat-card__progress-bar" 
                         style="width: 75%; background-color: ${sector.color};"></div>
                </div>
                <div class="stat-card__badge" style="background-color: ${sector.color};">
                    <span>Ù‚Ø·Ø§Ø¹ ${type.toUpperCase()}</span>
                </div>
            `;
            
            card.style.setProperty('--card-color', sector.color);
            card.onclick = () => showSectorDetails(sector, type);
            return card;
        }

        // Update charts
        function updateCharts() {
            updatePieChart();
            updateBarChart();
        }

        // Show sector details
        function showSectorDetails(sector, type) {
            const data = sector[type];
            const contacted = data.contacted;
            const totalBoth = dashboardData.general.total_companies_both;
            const totalType = type === 'esg' ? dashboardData.general.esg_total : dashboardData.general.tcfd_total;
            const percentageOfTotal = ((contacted / totalType) * 100).toFixed(1);
            
            const details = `
                Ø§Ù„Ù‚Ø·Ø§Ø¹: ${sector.name}\n
                Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø®Ø§Ø·Ø¨Ø© Ø¨Ù€ ${type.toUpperCase()}: ${contacted}\n
                Ø§Ù„Ù†Ø³Ø¨Ø© Ù…Ù† Ø¥Ø¬Ù…Ø§Ù„ÙŠ ${type.toUpperCase()}: ${percentageOfTotal}%\n
                Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø´Ø±ÙƒØ§Øª ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…: ${totalBoth}\n
                Ø¥Ø¬Ù…Ø§Ù„ÙŠ ${type.toUpperCase()}: ${totalType}
            `;
            
            alert(details);
        }

        // Update pie chart
        function updatePieChart() {
            const ctx = document.getElementById('pieChart').getContext('2d');
            
            if (pieChart) {
                pieChart.destroy();
            }

            const sectorLabels = dashboardData.sectors.map(sector => sector.name);
            const sectorData = dashboardData.sectors.map(sector => sector[currentTab].contacted);
            const sectorColors = dashboardData.sectors.map(sector => sector.color);

            const chartData = {
                labels: sectorLabels,
                datasets: [{
                    data: sectorData,
                    backgroundColor: sectorColors,
                    borderWidth: 2,
                    borderColor: '#ffffff'
                }]
            };

            pieChart = new Chart(ctx, {
                type: 'doughnut',
                data: chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            rtl: true,
                            labels: {
                                font: {
                                    family: 'FKGroteskNeue, Arial, sans-serif'
                                },
                                usePointStyle: true,
                                padding: 15
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const total = currentTab === 'esg' ? dashboardData.general.esg_total : dashboardData.general.tcfd_total;
                                    const percentage = ((context.parsed / total) * 100).toFixed(1);
                                    return context.label + ': ' + context.parsed + ' (' + percentage + '%)';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Update bar chart
        function updateBarChart() {
            const ctx = document.getElementById('barChart').getContext('2d');
            
            if (barChart) {
                barChart.destroy();
            }

            const labels = dashboardData.sectors.map(sector => sector.name);
            const contactedData = dashboardData.sectors.map(sector => sector[currentTab].contacted);
            const sectorColors = dashboardData.sectors.map(sector => sector.color);

            const datasets = [
                {
                    label: `Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø®Ø§Ø·Ø¨Ø© Ø¨Ù€ ${currentTab.toUpperCase()}`,
                    data: contactedData,
                    backgroundColor: sectorColors,
                    borderColor: sectorColors,
                    borderWidth: 2
                }
            ];

            barChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            ticks: {
                                font: {
                                    family: 'FKGroteskNeue, Arial, sans-serif'
                                },
                                maxRotation: 45
                            }
                        },
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 20
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            rtl: true,
                            labels: {
                                font: {
                                    family: 'FKGroteskNeue, Arial, sans-serif'
                                },
                                usePointStyle: true
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const total = currentTab === 'esg' ? dashboardData.general.esg_total : dashboardData.general.tcfd_total;
                                    const percentage = ((context.parsed.y / total) * 100).toFixed(1);
                                    return context.label + ': ' + context.parsed.y + ' Ø´Ø±ÙƒØ© (' + percentage + '%)';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Update sectors table
        function updateSectorsTable() {
            const container = document.getElementById('sectors-content');
            container.innerHTML = '';

            // Header row
            const headerRow = document.createElement('div');
            headerRow.className = 'sector-row';
            headerRow.style.background = 'var(--color-bg-3)';
            headerRow.style.fontWeight = 'var(--font-weight-semibold)';
            
            const headers = ['Ø§Ù„Ù‚Ø·Ø§Ø¹', `Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø®Ø§Ø·Ø¨Ø© ${currentTab.toUpperCase()}`, 'Ø§Ù„Ù†Ø³Ø¨Ø© Ù…Ù† Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ', 'Ø§Ù„Ø­Ø§Ù„Ø©'];
            headers.forEach(header => {
                const cell = document.createElement('div');
                cell.textContent = header;
                cell.className = header === 'Ø§Ù„Ù‚Ø·Ø§Ø¹' ? 'sector-name' : 'sector-value';
                headerRow.appendChild(cell);
            });
            container.appendChild(headerRow);

            // Calculate totals
            const totalType = currentTab === 'esg' ? dashboardData.general.esg_total : dashboardData.general.tcfd_total;
            const totalSectors = dashboardData.sectors.reduce((sum, sector) => sum + sector[currentTab].contacted, 0);

            // Data rows
            dashboardData.sectors.forEach(sector => {
                const data = sector[currentTab];
                const row = document.createElement('div');
                row.className = 'sector-row';
                
                // Sector name with icon
                const nameCell = document.createElement('div');
                nameCell.className = 'sector-name';
                nameCell.innerHTML = `<span style="margin-left: 8px;">${sector.icon}</span>${sector.name}`;
                row.appendChild(nameCell);
                
                // Contacted companies
                const contactedCell = document.createElement('div');
                contactedCell.className = 'sector-value';
                contactedCell.textContent = data.contacted;
                row.appendChild(contactedCell);
                
                // Percentage from total
                const percentageCell = document.createElement('div');
                percentageCell.className = 'sector-value';
                const percentage = ((data.contacted / totalType) * 100).toFixed(1);
                percentageCell.textContent = `${percentage}%`;
                row.appendChild(percentageCell);
                
                // Status
                const statusCell = document.createElement('div');
                statusCell.className = 'sector-value';
                statusCell.innerHTML = `<span class="status status--success">Ù…Ø®Ø§Ø·Ø¨Ø©</span>`;
                row.appendChild(statusCell);
                
                container.appendChild(row);
            });

            // Add totals row
            const totalsRow = document.createElement('div');
            totalsRow.className = 'sector-row';
            totalsRow.style.background = 'var(--color-bg-1)';
            totalsRow.style.fontWeight = 'var(--font-weight-bold)';
            totalsRow.style.borderTop = '2px solid var(--color-primary)';
            
            const totalCells = [
                `Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ ${currentTab.toUpperCase()}`,
                totalSectors,
                '100%',
                `<span class="status status--info">Ù…ÙƒØªÙ…Ù„</span>`
            ];
            
            totalCells.forEach((cellData, index) => {
                const cell = document.createElement('div');
                cell.className = index === 0 ? 'sector-name' : 'sector-value';
                if (typeof cellData === 'string' && cellData.includes('span')) {
                    cell.innerHTML = cellData;
                } else {
                    cell.textContent = cellData;
                }
                totalsRow.appendChild(cell);
            });
            
            container.appendChild(totalsRow);
        }

        // Editor functions
        function openEditor() {
            populateEditor();
            document.getElementById('editModal').classList.add('active');
        }

        function closeEditor() {
            document.getElementById('editModal').classList.remove('active');
        }

        function switchEditorTab(tab) {
            currentEditorTab = tab;
            
            // Update tab buttons
            document.querySelectorAll('.editor-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update sections
            document.querySelectorAll('.editor-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(`editor-${tab}`).classList.add('active');
        }

        function populateEditor() {
            // Populate titles
            document.getElementById('esg-title').value = dashboardData.esg.title;
            document.getElementById('tcfd-title').value = dashboardData.tcfd.title;
            
            // Populate totals
            ['esg', 'tcfd'].forEach(type => {
                const data = dashboardData[type];
                document.getElementById(`${type}-total-companies`).value = data.total_companies;
                Object.entries(data.totals).forEach(([rating, value]) => {
                    const element = document.getElementById(`${type}-${rating}`);
                    if (element) element.value = value;
                });
            });
            
            // Populate labels
            Object.entries(dashboardData.rating_labels).forEach(([rating, label]) => {
                const element = document.getElementById(`label-${rating}`);
                if (element) element.value = label;
            });
            
            // Populate sectors
            populateSectorsEditor();
        }

        function populateSectorsEditor() {
            const container = document.getElementById('sectors-editor');
            container.innerHTML = '';
            
            ['esg', 'tcfd'].forEach(type => {
                const sectionDiv = document.createElement('div');
                sectionDiv.innerHTML = `<h4>${type.toUpperCase()} - Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª</h4>`;
                
                dashboardData[type].sectors.forEach((sector, index) => {
                    const sectorDiv = document.createElement('div');
                    sectorDiv.style.marginBottom = 'var(--space-16)';
                    sectorDiv.style.padding = 'var(--space-16)';
                    sectorDiv.style.border = '1px solid var(--color-border)';
                    sectorDiv.style.borderRadius = 'var(--radius-base)';
                    
                    sectorDiv.innerHTML = `
                        <div class="form-group">
                            <label class="form-label">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠ</label>
                            <input type="text" class="form-control" 
                                   id="${type}-sector-${index}-name_ar" 
                                   value="${sector.name_ar}" />
                        </div>
                        <div class="editor-grid">
                            ${Object.keys(dashboardData[type].totals).map(rating => `
                                <div class="form-group">
                                    <label class="form-label">ØªÙ‚ÙŠÙŠÙ… ${rating}</label>
                                    <input type="number" class="form-control" 
                                           id="${type}-sector-${index}-${rating}" 
                                           value="${sector.ratings[rating] || 0}" />
                                </div>
                            `).join('')}
                            <div class="form-group">
                                <label class="form-label">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</label>
                                <input type="number" class="form-control" 
                                       id="${type}-sector-${index}-total" 
                                       value="${sector.total}" />
                            </div>
                        </div>
                    `;
                    
                    sectionDiv.appendChild(sectorDiv);
                });
                
                container.appendChild(sectionDiv);
            });
        }

        function saveChanges() {
            // Collect data from editor
            const updatedData = { ...dashboardData };
            
            // Update titles
            updatedData.esg.title = document.getElementById('esg-title').value;
            updatedData.tcfd.title = document.getElementById('tcfd-title').value;
            
            // Update totals
            ['esg', 'tcfd'].forEach(type => {
                const totalCompaniesElement = document.getElementById(`${type}-total-companies`);
                if (totalCompaniesElement) {
                    updatedData[type].total_companies = parseInt(totalCompaniesElement.value) || 0;
                }
                
                Object.keys(updatedData[type].totals).forEach(rating => {
                    const element = document.getElementById(`${type}-${rating}`);
                    if (element) {
                        updatedData[type].totals[rating] = parseInt(element.value) || 0;
                    }
                });
            });
            
            // Update labels
            Object.keys(updatedData.rating_labels).forEach(rating => {
                const element = document.getElementById(`label-${rating}`);
                if (element) {
                    updatedData.rating_labels[rating] = element.value;
                }
            });
            
            // Update sectors
            ['esg', 'tcfd'].forEach(type => {
                updatedData[type].sectors.forEach((sector, index) => {
                    const nameElement = document.getElementById(`${type}-sector-${index}-name_ar`);
                    if (nameElement) {
                        sector.name_ar = nameElement.value;
                    }
                    
                    Object.keys(updatedData[type].totals).forEach(rating => {
                        const element = document.getElementById(`${type}-sector-${index}-${rating}`);
                        if (element) {
                            sector.ratings[rating] = parseInt(element.value) || 0;
                        }
                    });
                    
                    const totalElement = document.getElementById(`${type}-sector-${index}-total`);
                    if (totalElement) {
                        sector.total = parseInt(totalElement.value) || 0;
                    }
                });
            });
            
            // Update global data
            dashboardData = updatedData;
            
            // Save to storage
            saveData(dashboardData);
            
            // Update dashboard
            updateDashboard();
            
            // Close editor
            closeEditor();
            
            // Show success message
            showToast('ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!', 'success');
        }

        function previewChanges() {
            saveChanges();
            closeEditor();
            showToast('ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©!', 'info');
        }

        // Data management functions
        function saveData(data) {
            // Using JavaScript variables instead of localStorage due to sandbox restrictions
            window.savedDashboardData = data;
        }

        function loadData() {
            return window.savedDashboardData || null;
        }

        function exportData() {
            const dataStr = JSON.stringify(dashboardData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'dashboard-data.json';
            link.click();
            URL.revokeObjectURL(url);
            showToast('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!', 'success');
        }

        function resetData() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©ØŸ')) {
                // Reset to default data
                window.savedDashboardData = null;
                initDashboard();
                showToast('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!', 'info');
            }
        }

        // Toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast show`;
            toast.style.backgroundColor = type === 'success' ? 'var(--color-success)' : 
                                        type === 'error' ? 'var(--color-error)' : 
                                        'var(--color-info)';
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', initDashboard);

        // Close modal when clicking outside
        document.getElementById('editModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeEditor();
            }
        });
    </script>
</body>
</html>